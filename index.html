<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizGame_By_KruLunwalai</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Sarabun',sans-serif;background-color:#000;display:grid;place-items:center;height:100vh;margin:0;overflow:hidden}.game-frame{position:relative;overflow:hidden;background-color:#fff;box-shadow:0 0 20px rgba(0,0,0,.5);width:100vw;height:calc(100vw * 1708 / 960)}@media (min-aspect-ratio: 960/1708){.game-frame{height:100vh;width:calc(100vh * 960 / 1708)}}.game-screen{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0;box-sizing:border-box;opacity:0;visibility:hidden;transition:opacity .5s ease-in-out;background-size:cover;background-position:center}.game-screen.active{opacity:1;visibility:visible}.answer-btn{width:55.2%;aspect-ratio:530 / 128;background-color:rgba(255,0,0,0);border:1px solid rgba(255,255,255,0);padding:0;cursor:pointer;transition:background-color .2s;z-index:10}.answer-btn:hover{background-color:rgba(255,0,0,0)}.top-center-start-btn{position:absolute;top:43%;left:50%;transform:translateX(-50%);width:25%;aspect-ratio:1 / 1;background-color:rgba(255,0,0,0);border:1px solid rgba(255,255,255,0);cursor:pointer;z-index:10}.top-center-start-btn:hover{background-color:rgba(255,0,0,0)}.custom-btn{padding:20px 40px;font-size:1.5rem;font-weight:700;border-radius:12px;cursor:pointer;transition:all .2s ease-out;border:none;box-shadow:0 4px 6px rgba(0,0,0,.1)}.custom-btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.15)}.custom-btn:active{transform:translateY(1px);box-shadow:0 2px 4px rgba(0,0,0,.1)}#thank-you-screen #final-score{position:absolute;top:25%;left:50%;transform:translateX(-50%);font-size:3rem;font-weight:700;text-shadow:2px 2px 8px rgba(0,0,0,.8)}#thank-you-screen p,#wrong-answer-screen h1,#wrong-answer-screen p{text-shadow:2px 2px 8px rgba(0,0,0,.8)}.feedback-popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.feedback-popup-overlay.visible{opacity:1;visibility:visible}.feedback-popup{background:rgba(255,255,255,.9);backdrop-filter:blur(10px);padding:2rem;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:90%;max-width:400px;text-align:center;position:relative;transform:scale(.9);transition:transform .3s ease}.feedback-popup-overlay.visible .feedback-popup{transform:scale(1)}.feedback-popup .close-btn{position:absolute;top:10px;right:10px;background:0 0;border:none;cursor:pointer;font-size:1.5rem;color:#666}.star-rating{display:flex;justify-content:center;gap:1rem;margin:1.5rem 0}.star{cursor:pointer;color:#ccc;transition:color .2s,transform .2s}.star:hover{transform:scale(1.2)}.star.selected,.star.hovered{color:#ffd700}#feedback-text{width:100%;min-height:100px;margin-top:1rem;padding:.75rem;border-radius:8px;border:1px solid #ddd;background-color:rgba(255,255,255,.5);font-family:'Sarabun',sans-serif;font-size:1rem;resize:vertical}#submit-feedback-btn{margin-top:1rem;background-color:#4caf50;color:#fff;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;transition:background-color .2s}#submit-feedback-btn:hover{background-color:#45a049}#submit-feedback-btn:disabled{background-color:#aaa;cursor:not-allowed}
    </style>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XQRWRKZ7RJ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XQRWRKZ7RJ');
    </script>
</head>
<body>

    <div id="protection-layer">
        <div class="game-frame">
            <div id="start-screen" class="game-screen active" style="background-image: url('./images/Startpage.png');">
                <div id="loading-indicator" class="text-white text-2xl bg-black/50 p-4 rounded-lg z-20">กำลังโหลด...</div>
                <button id="real-start-btn" class="top-center-start-btn hidden"></button>
            </div>
            <div id="quiz-screen" class="game-screen"></div>
            <div id="wrong-answer-screen" class="game-screen bg-red-500 text-white text-center p-10">
                <h1 class="text-6xl font-bold mb-8">Oops! wrong answer</h1>
                <p class="text-2xl mb-12">Try again</p>
                <button id="try-again-btn" class="custom-btn bg-white text-red-500 hover:bg-gray-100">Go back</button>
            </div>
            <div id="thank-you-screen" class="game-screen text-white text-center p-10" style="background-image: url('./images/GameOver.png');">
                <div id="final-score" class="text-5xl font-bold"></div>
                <div class="flex flex-col items-center">
                    <button id="play-again-btn" class="custom-btn bg-white/80 backdrop-blur-sm hover:bg-white text-gray-800">Go to start</button>
                </div>
            </div>
        </div>
        <div id="feedback-popup-overlay" class="feedback-popup-overlay">
            <div class="feedback-popup">
                <button id="close-popup-btn" class="close-btn">&times;</button>
                <h2 class="text-2xl font-bold text-gray-800">ให้คะแนนเกม</h2>
                <p class="text-gray-600">โปรดให้คะแนนเพื่อการพัฒนา</p>
                <p class="text-gray-600">ส่งข้อเสนอแนะถึง ครูลัญช์วลัย ใจหวาน</p>
                <p class="text-gray-600">ผู้จัดทำ</p>
                <div class="star-rating">
                    <span class="star text-4xl" data-value="1">&#9733;</span>
                    <span class="star text-4xl" data-value="2">&#9733;</span>
                    <span class="star text-4xl" data-value="3">&#9733;</span>
                </div>
                <textarea id="feedback-text" placeholder="ข้อเสนอแนะเพิ่มเติม..."></textarea>
                <button id="submit-feedback-btn" class="custom-btn bg-green-500 text-white hover:bg-green-600">ส่งข้อมูล</button>
            </div>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="./audio/gametheme.ogg" type="audio/ogg">
    </audio>

    <script>
    // Protection Script
    !function(){function e(){try{const t=new Date;debugger;100<new Date-t&&(t=>{const n=document.getElementById("protection-layer");n&&(n.innerHTML=`<div style="position:fixed;top:0;left:0;width:100%;height:100%;background-color:black;color:white;display:flex;justify-content:center;align-items:center;text-align:center;font-family:sans-serif;font-size:2rem;z-index:9999;">ไม่อนุญาตให้ใช้เครื่องมือสำหรับนักพัฒนา<br/>(Developer tools are not allowed)</div>`)})(0)}catch(e){}}document.addEventListener("contextmenu",e=>e.preventDefault()),document.onkeydown=function(e){return 123==e.keyCode||e.ctrlKey&&e.shiftKey&&73==e.keyCode||e.ctrlKey&&e.shiftKey&&74==e.keyCode||e.ctrlKey&&85==e.keyCode?!1:void 0};const t=setInterval(e,1e3)}();

    // Game Script (Obfuscated & Minified)
    const QUIZ_TITLE="02_VEGAndfruit",quizData=[{questionImage:"./images/ig01.png",answers:["","",""],correct:0},{questionImage:"./images/ig02.png",answers:["","",""],correct:1},{questionImage:"./images/ig03.png",answers:["","",""],correct:0},{questionImage:"./images/ig04.png",answers:["","",""],correct:2},{questionImage:"./images/ig05.png",answers:["","",""],correct:0},{questionImage:"./images/ig06.png",answers:["","",""],correct:2},{questionImage:"./images/ig07.png",answers:["","",""],correct:0},{questionImage:"./images/ig08.png",answers:["","",""],correct:1},{questionImage:"./images/ig09.png",answers:["","",""],correct:1},{questionImage:"./images/ig10.png",answers:["","",""],correct:0},{questionImage:"./images/ig11.png",answers:["","",""],correct:2},{questionImage:"./images/ig12.png",answers:["","",""],correct:2},{questionImage:"./images/ig13.png",answers:["","",""],correct:1},{questionImage:"./images/ig14.png",answers:["","",""],correct:0},{questionImage:"./images/ig15.png",answers:["","",""],correct:0},{questionImage:"./images/ig16.png",answers:["","",""],correct:1},{questionImage:"./images/ig17.png",answers:["","",""],correct:0},{questionImage:"./images/ig18.png",answers:["","",""],correct:1},{questionImage:"./images/ig19.png",answers:["","",""],correct:0},{questionImage:"./images/ig20.png",answers:["","",""],correct:2}],SCRIPT_URL="https://script.google.com/macros/s/AKfycby_lmku8r8oaXmDf5zyu3jJddiQap-TPCoEWtEVZBvPzoMuOAAYVIBUtDMHXee6m6GEzA/exec";function l(){let e=localStorage.getItem("quizGameDeviceId");return e||(e="device-"+Date.now()+"-"+Math.random().toString(36).substring(2,11),localStorage.setItem("quizGameDeviceId",e)),e}async function m(e){const t={sheetName:"Scores",deviceId:l(),score:e,titleQuiz:QUIZ_TITLE};try{await fetch(SCRIPT_URL,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"follow"}),console.log("Score submission request sent.")}catch(e){console.error("Error submitting score:",e)}}function n(e,t){const o={sheetName:"Feedback",deviceId:l(),rating:e,feedbackText:t,titleQuiz:QUIZ_TITLE};fetch(SCRIPT_URL,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),redirect:"follow"}).then(()=>{console.log("Feedback submission request sent.")}).catch(e=>{console.error("Error submitting feedback:",e)})}const screens=document.querySelectorAll(".game-screen"),startBtn=document.getElementById("real-start-btn"),tryAgainBtn=document.getElementById("try-again-btn"),playAgainBtn=document.getElementById("play-again-btn"),quizScreenEl=document.getElementById("quiz-screen"),loadingIndicator=document.getElementById("loading-indicator"),finalScoreEl=document.getElementById("final-score"),backgroundMusic=document.getElementById("backgroundMusic");let o=0,r=20,a=[];const i=new Audio("./audio/correct.ogg"),c=new Audio("./audio/wrong.ogg");function s(e){for(let t=e.length-1;0<t;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}function d(e){screens.forEach(t=>{t.classList.remove("active")}),document.getElementById(e).classList.add("active")}function u(e){const t=a[e];quizScreenEl.innerHTML="",quizScreenEl.style.backgroundImage=`url('${t.questionImage}')`;const o=document.createElement("div");o.className="absolute w-full flex flex-col items-center",o.style.bottom="30%",o.style.left="50%",o.style.transform="translateX(-50%)",o.style.height="22%",o.style.gap="13%",t.answers.forEach((e,t)=>{const r=document.createElement("button");r.className="answer-btn",r.addEventListener("click",()=>p(t)),o.appendChild(r)}),quizScreenEl.appendChild(o)}function p(e){const t=a[o].correct;if(e===t)i.currentTime=0,i.play(),o++,o<a.length?(u(o),d("quiz-screen")):(finalScoreEl.innerText=Math.max(0,r),d("thank-you-screen"),playAgainBtn.disabled=!0,playAgainBtn.style.cursor="not-allowed",m(Math.max(0,r)),setTimeout(()=>document.getElementById("feedback-popup-overlay").classList.add("visible"),300));else c.currentTime=0,c.play(),r--,d("wrong-answer-screen")}startBtn.addEventListener("click",()=>{backgroundMusic.play().catch(e=>console.log("Background music autoplay prevented:",e)),o=0,r=20,a=s([...quizData]),u(o),d("quiz-screen")}),tryAgainBtn.addEventListener("click",()=>d("quiz-screen")),playAgainBtn.addEventListener("click",()=>d("start-screen"));const feedbackOverlay=document.getElementById("feedback-popup-overlay"),closePopupBtn=document.getElementById("close-popup-btn"),submitFeedbackBtn=document.getElementById("submit-feedback-btn"),stars=document.querySelectorAll(".star-rating .star");let y=0;function g(){feedbackOverlay.classList.remove("visible"),playAgainBtn.disabled=!1,playAgainBtn.style.cursor="pointer"}closePopupBtn.addEventListener("click",g),stars.forEach(e=>{e.addEventListener("click",()=>{y=parseInt(e.dataset.value),stars.forEach(e=>{e.classList.remove("selected"),parseInt(e.dataset.value)<=y&&e.classList.add("selected")})}),e.addEventListener("mouseover",()=>{const t=parseInt(e.dataset.value);stars.forEach(e=>{e.classList.remove("hovered"),parseInt(e.dataset.value)<=t&&e.classList.add("hovered")})}),e.addEventListener("mouseout",()=>{stars.forEach(e=>e.classList.remove("hovered"))})}),submitFeedbackBtn.addEventListener("click",()=>{0===y?alert("⭐⭐กรุณาให้คะแนนดาวก่อนส่ง⭐⭐"):(submitFeedbackBtn.disabled=!0,submitFeedbackBtn.innerText="⏳กำลังส่ง...⏳",n(y,document.getElementById("feedback-text").value),submitFeedbackBtn.innerText="🙏ส่งสำเร็จ🙏",setTimeout(()=>{g(),submitFeedbackBtn.disabled=!1,submitFeedbackBtn.innerText="ส่งข้อมูล",y=0,stars.forEach(e=>e.classList.remove("selected")),document.getElementById("feedback-text").value=""},2e3))});function f(){const e="./images/Startpage.png",t=quizData.map(e=>e.questionImage),o=new Image;o.onload=()=>{loadingIndicator.style.display="none",startBtn.classList.remove("hidden"),t.forEach(e=>{const t=new Image;t.src=e})},o.src=e}window.addEventListener("load",()=>f());
    </script>
</body>
</html>
